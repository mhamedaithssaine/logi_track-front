<div class="wm-admin-list">
  <div class="header-actions">
    <h2>Warehouse Managers</h2>
    <a routerLink="/admin/users/warehouse-managers/new" class="btn btn-primary">
      + Nouveau Warehouse Manager
    </a>
  </div>

  @if (isLoading) {
    <div class="loading">
      <p>Chargement des responsables d‚Äôentrep√¥t...</p>
    </div>
  } @else if (loadError) {
    <div class="load-error">
      <p>{{ loadError }}</p>
      <p class="hint">V√©rifiez que le backend est d√©marr√© et que vous √™tes connect√© en tant qu'admin.</p>
      <button type="button" class="btn btn-primary" (click)="loadManagers()">R√©essayer</button>
    </div>
  } @else {
    <div class="table-container">
      <table class="products-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nom</th>
            <th>Email</th>
            <th>T√©l√©phone</th>
            <th>Entrep√¥t</th>
            <th>Actif</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (m of managers; track m.id) {
            <tr>
              <td>{{ m.id }}</td>
              <td>{{ m.name }}</td>
              <td>{{ m.email }}</td>
              <td>{{ m.phone || '-' }}</td>
              <td>{{ m.warehouseName || '-' }}</td>
              <td>
                <span [class]="m.active ? 'badge-active' : 'badge-inactive'">
                  {{ m.active ? 'Actif' : 'Inactif' }}
                </span>
              </td>
              <td class="actions">
                <a [routerLink]="['/admin/users/warehouse-managers', m.id, 'edit']"
                   class="btn-action btn-edit" title="Modifier">
                  ‚úèÔ∏è
                </a>
                @if (m.active) {
                  <button (click)="deactivate(m.id)" class="btn-action btn-deactivate" title="D√©sactiver">
                    ‚è∏Ô∏è
                  </button>
                } @else {
                  <button (click)="activate(m.id)" class="btn-action btn-activate" title="Activer">
                    ‚ñ∂Ô∏è
                  </button>
                }
                <button (click)="delete(m.id)" class="btn-action btn-delete" title="Supprimer">
                  üóëÔ∏è
                </button>
              </td>
            </tr>
          } @empty {
            <tr>
              <td colspan="7" class="empty">Aucun Warehouse Manager trouv√©</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>

