<div class="wm-dashboard">
  <section class="wm-hero">
    <h2>Espace EntrepÃ´t</h2>
    <p>GÃ©rez vos produits, fournisseurs, inventaire et expÃ©ditions depuis ce tableau de bord.</p>
  </section>

  @if (isLoading) {
    <div class="wm-dashboard-loading">
      <p>Chargement des donnÃ©esâ€¦</p>
    </div>
  } @else if (loadError) {
    <div class="wm-dashboard-error">
      <p>{{ loadError }}</p>
      <p class="wm-dashboard-hint">VÃ©rifiez que le backend est dÃ©marrÃ© et que vous Ãªtes connectÃ©.</p>
      <button type="button" class="wm-dashboard-retry" (click)="loadAll()">RÃ©essayer</button>
    </div>
  }

  @if (!isLoading && !loadError) {
  <section class="wm-stats">
    <div class="wm-stat-card wm-stat-products">
      <span class="wm-stat-icon">ğŸ“¦</span>
      <div>
        <span class="wm-stat-value">{{ productsCount }}</span>
        <span class="wm-stat-label">Produits</span>
      </div>
      <a routerLink="/warehouse/products" class="wm-stat-link">Voir â†’</a>
    </div>
    <div class="wm-stat-card wm-stat-suppliers">
      <span class="wm-stat-icon">ğŸšš</span>
      <div>
        <span class="wm-stat-value">{{ suppliersCount }}</span>
        <span class="wm-stat-label">Fournisseurs</span>
      </div>
      <a routerLink="/warehouse/suppliers" class="wm-stat-link">Voir â†’</a>
    </div>
    <div class="wm-stat-card wm-stat-warehouses">
      <span class="wm-stat-icon">ğŸ­</span>
      <div>
        <span class="wm-stat-value">{{ warehousesCount }}</span>
        <span class="wm-stat-label">EntrepÃ´ts</span>
      </div>
      <a routerLink="/warehouse/warehouses" class="wm-stat-link">Voir â†’</a>
    </div>
    <div class="wm-stat-card">
      <span class="wm-stat-icon">ğŸ“‹</span>
      <div>
        <span class="wm-stat-value">{{ ordersToReserveCount }}</span>
        <span class="wm-stat-label">Ã€ rÃ©server</span>
      </div>
      <a routerLink="/warehouse/orders" class="wm-stat-link">Voir â†’</a>
    </div>
    <div class="wm-stat-card">
      <span class="wm-stat-icon">ğŸš¢</span>
      <div>
        <span class="wm-stat-value">{{ shipmentsPlannedCount }}</span>
        <span class="wm-stat-label">ExpÃ©ditions</span>
      </div>
      <a routerLink="/warehouse/shipments" class="wm-stat-link">Voir â†’</a>
    </div>
  </section>

  <section class="wm-charts">
    <div class="wm-chart-card">
      <h3>EntitÃ©s & commandes Ã  rÃ©server</h3>
      <div class="wm-chart-container">
        <canvas baseChart [type]="'bar'" [data]="barChartData" [options]="barChartOptions"></canvas>
      </div>
    </div>
    <div class="wm-chart-card">
      <h3>Commandes par statut</h3>
      <div class="wm-chart-container">
        <canvas baseChart [type]="'doughnut'" [data]="doughnutChartData" [options]="doughnutChartOptions"></canvas>
      </div>
    </div>
  </section>

  <section class="wm-actions">
    <h3>AccÃ¨s rapide</h3>
    <div class="wm-action-grid">
      <a routerLink="/warehouse/products" class="wm-action-tile">
        <span class="wm-action-icon">ğŸ“¦</span>
        <span class="wm-action-title">Produits</span>
        <span class="wm-action-desc">Catalogue et stock</span>
      </a>
      <a routerLink="/warehouse/suppliers" class="wm-action-tile">
        <span class="wm-action-icon">ğŸšš</span>
        <span class="wm-action-title">Fournisseurs</span>
        <span class="wm-action-desc">Contacts et approvisionnement</span>
      </a>
      <a routerLink="/warehouse/warehouses" class="wm-action-tile">
        <span class="wm-action-icon">ğŸ­</span>
        <span class="wm-action-title">EntrepÃ´ts</span>
        <span class="wm-action-desc">Sites de stockage</span>
      </a>
      <a routerLink="/warehouse/inventory" class="wm-action-tile">
        <span class="wm-action-icon">ğŸ“‹</span>
        <span class="wm-action-title">Inventaire</span>
        <span class="wm-action-desc">Mouvements et niveaux</span>
      </a>
      <a routerLink="/warehouse/purchase-orders" class="wm-action-tile">
        <span class="wm-action-icon">ğŸ“„</span>
        <span class="wm-action-title">Commandes d'achat</span>
        <span class="wm-action-desc">RÃ©approvisionnement</span>
      </a>
      <a routerLink="/warehouse/orders" class="wm-action-tile">
        <span class="wm-action-icon">ğŸ›’</span>
        <span class="wm-action-title">Commandes</span>
        <span class="wm-action-desc">Commandes clients</span>
      </a>
      <a routerLink="/warehouse/shipments" class="wm-action-tile">
        <span class="wm-action-icon">ğŸš¢</span>
        <span class="wm-action-title">ExpÃ©ditions</span>
        <span class="wm-action-desc">Livraisons et suivi</span>
      </a>
    </div>
  </section>
  }
</div>
